<?xml version="1.0"?>
<layout>

    <adminhtml_sales_order_status_edit>
        <reference name="head">
            <action method="addJs"><file>theextensionlab/adminhtml/jscolor/jscolor.js</file></action>
        </reference>
    </adminhtml_sales_order_status_edit>

    <add_status_color_css_handle>
        <reference name="head">
            <action method="addCss"><file>theextensionlab/statuscolors/grid.css</file></action>
        </reference>
    </add_status_color_css_handle>

    <adminhtml_sales_order_index>
        <update handle="add_status_color_css_handle" />
        <reference name="head">
            <action method="addJs" ifconfig="theextensionlab_statuscolors/grid_style/color_whole_row"><file>theextensionlab/statuscolors/adminhtml/grid-row.js</file></action>
            <action method="addCss"><file>theextensionlab/statuscolors/grid.css</file></action>
        </reference>
    </adminhtml_sales_order_index>

    <!-- main layout definition that adds the column -->
    <add_order_grid_column_handle>
        <reference name="sales_order.grid">
            <action method="addColumnAfter">
                <columnId>status_with_color</columnId>
                <arguments helper="theextensionlab_statuscolors/data/getStatusColumn"/>
                <after>grand_total</after>
            </action>
        </reference>
    </add_order_grid_column_handle>

    <!-- order grid action -->
    <adminhtml_sales_order_grid>
        <!-- apply the layout handle defined above -->
        <update handle="add_order_grid_column_handle" />
    </adminhtml_sales_order_grid>

    <!-- order grid view action -->
    <adminhtml_sales_order_index>
        <!-- apply the layout handle defined above -->
        <update handle="add_order_grid_column_handle" />
    </adminhtml_sales_order_index>

    <adminhtml_sales_order_status_index>
        <update handle="add_status_color_css_handle" />
        <reference name="sales_order_status.grid">
            <action method="addColumnAfter">
                <columnId>status_color</columnId>
                <arguments helper="theextensionlab_statuscolors/data/getStatusColorColumn"/>
                <after>state</after>
            </action>
        </reference>
    </adminhtml_sales_order_status_index>

    <adminhtml_sales_order_view>
        <update handle="add_status_color_css_handle" />
    </adminhtml_sales_order_view>

</layout>